<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkyRelief Simulation</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;700;800&family=Rajdhani:wght@500;600;700&family=Lora:ital@0;1&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-deep: #020617;
            --card-bg: rgba(30, 41, 59, 0.4);
            --card-border: rgba(148, 163, 184, 0.1);
            --primary: #3b82f6; --accent: #8b5cf6; --success: #10b981; --danger: #f43f5e;
            --text-main: #ffffff; --text-sec: #94a3b8;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            background-color: var(--bg-deep);
            color: var(--text-main);
            font-family: 'Outfit', sans-serif;
            height: 100vh; width: 100vw; overflow: hidden;
            display: grid; grid-template-rows: 60px 1fr;
            background: radial-gradient(circle at center, #1e293b 0%, #020617 100%);
        }

        /* --- HEADER --- */
        header { display: flex; align-items: center; justify-content: space-between; padding: 0 30px; border-bottom: 1px solid var(--card-border); backdrop-filter: blur(10px); z-index: 100; background: rgba(2, 6, 23, 0.6); }
        .logo { font-weight: 800; font-size: 20px; letter-spacing: -0.5px; background: linear-gradient(90deg, #fff, #94a3b8); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        
        /* --- LAYOUT --- */
        .dashboard-grid { display: grid; grid-template-columns: 1fr 380px 1fr; gap: 20px; padding: 20px 30px; height: 100%; }
        .glass-panel { background: var(--card-bg); border: 1px solid var(--card-border); border-radius: 20px; padding: 20px; display: flex; flex-direction: column; backdrop-filter: blur(20px); box-shadow: 0 20px 40px -10px rgba(0,0,0,0.3); }

        /* --- FLIGHT DATA --- */
        .flight-card { display: flex; align-items: center; justify-content: space-between; padding: 10px 14px; margin-bottom: 8px; background: rgba(255,255,255,0.02); border-radius: 10px; transition: all 0.3s; border: 1px solid transparent; }
        .flight-card.cancelled { background: linear-gradient(90deg, rgba(244, 63, 94, 0.2), transparent); border-color: var(--danger); animation: pulseRed 2s infinite; }
        @keyframes pulseRed { 0% {box-shadow: 0 0 0 0 rgba(244, 63, 94, 0.4);} 70% {box-shadow: 0 0 0 10px rgba(244, 63, 94, 0);} 100% {box-shadow: 0 0 0 0 rgba(244, 63, 94, 0);} }
        
        .flight-ident { display: flex; align-items: center; gap: 10px; }
        .status-tag { font-size: 10px; font-weight: 700; padding: 4px 8px; border-radius: 6px; background: rgba(16, 185, 129, 0.15); color: var(--success); }
        .cancelled .status-tag { background: var(--danger); color: white; }

        /* --- ROI BOX --- */
        .roi-box { margin-top: auto; padding-top: 15px; border-top: 1px solid var(--card-border); }
        .big-number { font-family: 'Rajdhani', sans-serif; font-size: 54px; font-weight: 700; line-height: 1; margin: 5px 0; background: linear-gradient(to right, #fff, #94a3b8); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .roi-sub { font-size: 12px; color: var(--success); font-weight: 500; }

        /* --- PHONE MOCKUP --- */
        .phone-mockup { width: 100%; height: 100%; background: #0f172a; border-radius: 40px; border: 6px solid #334155; position: relative; overflow: hidden; box-shadow: 0 30px 70px -20px rgba(0,0,0,0.8); }
        .notch { position: absolute; top: 0; left: 50%; transform: translateX(-50%); width: 100px; height: 24px; background: #000; border-bottom-radius: 16px; z-index: 20; }
        .screen-content { background: #f1f5f9; height: 100%; width: 100%; padding: 40px 15px 15px; display: flex; flex-direction: column; overflow: hidden; position: relative; }
        
        .phone-header { display: flex; align-items: center; justify-content: center; gap: 8px; margin-bottom: 15px; color:#334155; font-weight:700; font-size: 14px; }
        .bot-avatar { width: 28px; height: 28px; border-radius: 50%; background: #fff; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }

        .msg { background: #fff; padding: 12px; border-radius: 16px; border-bottom-left-radius: 4px; font-size: 12px; color: #1e293b; margin-bottom: 8px; opacity: 0; transform: translateY(20px); transition: 0.5s; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .msg.visible { opacity: 1; transform: translateY(0); }

        .offer-card-ui { background: linear-gradient(135deg, #4f46e5, #7c3aed); color: white; padding: 15px; border-radius: 16px; text-align: center; margin-top: 5px; opacity: 0; transform: scale(0.9); transition: 0.5s; box-shadow: 0 10px 30px -10px rgba(79, 70, 229, 0.5); }
        .offer-card-ui.visible { opacity: 1; transform: scale(1); }
        .offer-amount { font-family: 'Rajdhani', sans-serif; font-size: 36px; font-weight: 700; margin: 2px 0; }

        /* --- LEGAL MODAL & SIGNATURE --- */
        .legal-modal { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #fff; z-index: 30; padding: 50px 15px 15px; display: flex; flex-direction: column; transform: translateY(100%); transition: transform 0.5s cubic-bezier(0.16, 1, 0.3, 1); }
        .legal-modal.active { transform: translateY(0); }
        .legal-text { font-family: 'Lora', serif; font-size: 10px; color: #475569; line-height: 1.4; overflow-y: auto; flex-grow: 1; padding: 8px; background: #f1f5f9; border-radius: 6px; border: 1px solid #e2e8f0; }
        .signature-pad { height: 80px; border: 2px dashed #cbd5e1; margin: 10px 0; border-radius: 10px; position: relative; background: #f8fafc; }
        .sig-canvas { width: 100%; height: 100%; }

        /* --- VOUCHERS --- */
        .voucher-container { display: flex; gap: 8px; margin-top: 10px; opacity: 0; transform: translateY(20px); transition: 0.5s 0.5s; }
        .voucher-container.visible { opacity: 1; transform: translateY(0); }
        .voucher { flex: 1; background: #fff; padding: 10px 5px; border-radius: 10px; text-align: center; box-shadow: 0 4px 10px rgba(0,0,0,0.05); display: flex; flex-direction: column; align-items: center; justify-content: center; }

        /* --- FINGER --- */
        .finger-pointer { 
            position: absolute; width: 40px; height: 40px; 
            background: rgba(255, 255, 255, 0.4); border-radius: 50%; border: 2px solid rgba(255,255,255,0.9); 
            pointer-events: none; z-index: 100; opacity: 0; 
            transition: top 0.6s cubic-bezier(0.22, 1, 0.36, 1), left 0.6s cubic-bezier(0.22, 1, 0.36, 1), opacity 0.3s; 
            display: flex; justify-content: center; align-items: center; font-size: 20px; backdrop-filter: blur(4px); 
            top: 100%; left: 50%;
        }
        .finger-pointer.active { opacity: 1; }
        .finger-pointer.click { transform: scale(0.8); background: rgba(255,255,255,0.8); transition: transform 0.1s; }

        /* --- MARKET / BIDDING --- */
        .bid-item { 
            display: flex; align-items: center; padding: 10px; 
            background: rgba(255,255,255,0.03); border-radius: 12px; 
            margin-bottom: 8px; gap: 10px; border: 1px solid transparent; 
            opacity: 0; transform: translateX(20px); transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .bid-item.appear { opacity: 1; transform: translateX(0); }
        .bid-item.winner { background: rgba(16, 185, 129, 0.1); border-color: var(--success); transform: scale(1.02); box-shadow: 0 10px 30px -10px rgba(16, 185, 129, 0.3); }
        .bid-item.disabled { opacity: 0.3; filter: grayscale(1); }
        .hotel-thumb { width: 50px; height: 50px; border-radius: 8px; object-fit: cover; border: 1px solid rgba(255,255,255,0.1); }
        .bid-info { flex-grow: 1; }
        .bid-val { font-family: 'Rajdhani', sans-serif; font-size: 20px; font-weight: 700; white-space: nowrap; }

        /* --- SUMMARY OVERLAY --- */
        .summary-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(2, 6, 23, 0.85); backdrop-filter: blur(10px);
            z-index: 200; display: flex; align-items: center; justify-content: center;
            opacity: 0; pointer-events: none; transition: opacity 0.8s ease;
        }
        .summary-overlay.visible { opacity: 1; pointer-events: all; }

        .summary-card {
            width: 450px; padding: 30px; border-radius: 24px;
            background: rgba(15, 23, 42, 0.8);
            border: 1px solid rgba(255,255,255,0.15);
            box-shadow: 0 25px 60px rgba(0,0,0,0.6);
            text-align: center; transform: scale(0.9); transition: transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .summary-overlay.visible .summary-card { transform: scale(1); }

        .chart-container {
            display: flex; align-items: flex-end; justify-content: center; gap: 30px;
            height: 160px; margin: 20px 0; border-bottom: 1px solid rgba(255,255,255,0.1);
            padding-bottom: 10px;
        }
        .bar-group { display: flex; flex-direction: column; align-items: center; width: 70px; }
        .bar { width: 100%; border-radius: 6px 6px 0 0; transition: height 1.5s ease-out; height: 0; }
        .bar-red { background: linear-gradient(to top, #ef4444, #f87171); box-shadow: 0 0 15px rgba(239, 68, 68, 0.3); }
        .bar-green { background: linear-gradient(to top, #10b981, #34d399); box-shadow: 0 0 15px rgba(16, 185, 129, 0.3); }
        .bar-label { font-size: 10px; margin-top: 8px; color: var(--text-sec); letter-spacing: 0.5px; }
        .bar-value { margin-bottom: 6px; font-weight: 700; font-family: 'Rajdhani'; font-size: 16px; }

        .contact-btn {
            background: linear-gradient(90deg, #3b82f6, #6366f1);
            border: none; padding: 14px 28px; border-radius: 10px;
            color: white; font-weight: 700; font-size: 14px; font-family: 'Outfit';
            cursor: pointer; margin-top: 15px; transition: transform 0.2s;
            text-decoration: none; display: inline-block;
        }
        .contact-btn:hover { transform: translateY(-2px); }

    </style>
</head>
<body>

    <header>
        <div class="logo"><span style="color:var(--primary)">‚óÜ</span> SKYRELIEF <span style="font-weight:300; opacity:0.5; font-size: 12px;">AUTONOMOUS ENGINE</span></div>
    </header>

    <div class="dashboard-grid">
        <div class="glass-panel">
            <div class="panel-title" style="color:var(--text-sec); font-size:11px; margin-bottom:10px; letter-spacing: 1px;">LIVE OPS CENTER</div>
            
            <div class="flight-card">
                <div class="flight-ident"><div style="width:20px; height:20px; background:#fff; border-radius:2px;"></div><div style="font-weight:600">BA-104</div></div>
                <div class="status-tag">ON TIME</div>
            </div>
            
            <div class="flight-card" id="target-flight">
                <div class="flight-ident"><div style="width:20px; height:20px; background:#fff; border-radius:2px;"></div><div style="font-weight:600">LY-315</div></div>
                <div class="status-tag" id="target-tag">ON TIME</div>
            </div>

            <div class="roi-box">
                <div style="font-size:11px; color:var(--text-sec); letter-spacing: 1px;">RISK EXPOSURE</div>
                <div class="big-number" id="money-display">$0</div>
                <div class="roi-sub" id="roi-sub">Monitoring...</div>
            </div>
        </div>

        <div style="padding: 5px;">
            <div class="phone-mockup">
                <div class="notch"></div>
                <div class="screen-content" id="phone-screen-area">
                    <div class="phone-header">
                        <img src="https://ui-avatars.com/api/?name=AI&background=fff" class="bot-avatar" alt="Bot">
                        <span>SkyRelief Assistant</span>
                    </div>
                    <div id="chat-container" style="flex-grow: 1;"></div>
                    
                    <div class="voucher-container" id="final-vouchers">
                        <div class="voucher">
                            <div style="font-size:9px; font-weight:700; color:#334155;">HOTEL KEY</div>
                            <div style="font-size:24px;">üè®</div>
                        </div>
                        <div class="voucher" style="background:#1e293b; color:white;">
                            <div style="font-size:24px;">üöñ</div>
                            <div style="font-size:9px; opacity:0.8;">UBER READY</div>
                        </div>
                    </div>

                    <div class="finger-pointer" id="finger">üëÜ</div>

                    <div class="legal-modal" id="legal-modal">
                        <div style="text-align:center; font-weight:700; color:#1e293b; margin-bottom:10px;">Compromise Agreement</div>
                        <div class="legal-text">
                            <strong>FULL AND FINAL SETTLEMENT</strong><br>
                            I accept the $600 voucher & hotel accommodation in exchange for waiving all future claims (EU261) regarding flight LY-315.
                        </div>
                        <div class="signature-pad" id="sig-pad-container">
                            <div style="position:absolute; top:5px; left:10px; font-size:8px; color:#94a3b8;">SIGN HERE:</div>
                            <canvas id="sig-canvas" class="sig-canvas"></canvas>
                        </div>
                        <button id="confirm-sign-btn" style="background:#1e293b; color:white; border:none; padding:12px; width:100%; border-radius:10px; font-weight:700;">Sign & Accept</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="glass-panel">
            <div class="panel-title" style="color:var(--text-sec); font-size:11px; margin-bottom:10px; letter-spacing: 1px;">BLIND BIDDING ENGINE</div>
            <div id="market-list">
                <div class="bid-item" id="bid-1">
                    <img src="https://images.unsplash.com/photo-1566073771259-6a8506099945?w=100&q=80" class="hotel-thumb" alt="H1">
                    <div class="bid-info"><div style="font-weight:600">Grand Air</div><div style="font-size:10px; color:var(--danger);">‚ö† High Rate</div></div>
                    <div class="bid-val" id="p1">‚Ç¨250</div>
                </div>
                <div class="bid-item" id="bid-2">
                    <img src="https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=100&q=80" class="hotel-thumb" alt="H2">
                    <div class="bid-info"><div style="font-weight:600">Metro Hub</div><div style="font-size:10px; color:var(--success);">‚úî Best Value</div></div>
                    <div class="bid-val" id="p2">‚Ç¨250</div>
                </div>
            </div>
        </div>
    </div>

    <div class="summary-overlay" id="summary-overlay">
        <div class="summary-card">
            <div style="font-size:11px; letter-spacing:2px; text-transform:uppercase; color:var(--accent);">Case Closed</div>
            <h2 style="font-size:28px; font-weight:800; margin:5px 0 20px 0;">Executive Summary</h2>
            
            <div class="chart-container">
                <div class="bar-group">
                    <div class="bar-value" style="color:#f87171">$270k</div>
                    <div class="bar bar-red" id="bar-risk" style="height:0%"></div>
                    <div class="bar-label">RISK</div>
                </div>
                <div class="bar-group">
                    <div class="bar-value" style="color:#34d399">$54k</div>
                    <div class="bar bar-green" id="bar-actual" style="height:0%"></div>
                    <div class="bar-label">COST</div>
                </div>
            </div>

            <div style="font-family:'Rajdhani'; font-size:22px; color:var(--success); margin-bottom:20px;">
                TOTAL SAVINGS: <strong>$216,000</strong>
            </div>

            <a href="mailto:office@skyrelief.com" class="contact-btn">Get Full Report</a>
        </div>
    </div>

    <script>
        const delay = ms => new Promise(res => setTimeout(res, ms));
        
        // Start immediately on load
        window.onload = () => { initScenario(); };

        async function initScenario() {
            // 0s: Start
            await delay(500);
            document.getElementById('target-flight').classList.add('cancelled');
            document.getElementById('target-tag').innerText = "DELAYED";
            document.getElementById('money-display').innerText = "$270,000";
            document.getElementById('money-display').style.color = "#f43f5e";
            
            // 1.5s: Auction (Right Screen)
            await delay(1000);
            runAuction();
            
            // 4.5s: Passenger Alert (Center Screen)
            await delay(3000); 
            sendMsg("‚ö†Ô∏è <strong>Flight Delayed:</strong> LY-315. We have secured a hotel + compensation for you.");
            
            // 5.5s: Offer
            await delay(1000);
            showInitialOffer();
        }

        async function runAuction() {
            const h1 = document.getElementById('bid-1');
            const h2 = document.getElementById('bid-2');
            
            h1.classList.add('appear'); await delay(200);
            h2.classList.add('appear'); 

            let p1=250, p2=250;
            for(let i=0; i<8; i++) {
                p1 -= Math.floor(Math.random()*5); 
                p2 -= Math.floor(Math.random()*8); // Winner drops faster
                document.getElementById('p1').innerText = `‚Ç¨${p1}`; 
                document.getElementById('p2').innerText = `‚Ç¨${p2}`; 
                await delay(200);
            }
            h1.classList.add('disabled'); 
            h2.classList.add('winner');
        }

        function sendMsg(html) {
            const div = document.createElement('div'); div.className = 'msg'; div.innerHTML = html;
            document.getElementById('chat-container').appendChild(div);
            setTimeout(() => div.classList.add('visible'), 50);
        }

        async function showInitialOffer() {
            const offerHTML = `
            <div class="offer-card-ui visible">
                <div style="font-size:10px; text-transform:uppercase; opacity:0.9;">Metro Hub Hotel + Voucher</div>
                <div class="offer-amount">$600</div>
                <div style="font-size:11px; margin-bottom:10px;">Tap below to accept & waive claim.</div>
                <button id="review-btn" style="background:white; color:#4f46e5; border:none; padding:10px; width:100%; border-radius:8px; font-weight:700;">Tap to Sign</button>
            </div>`;
            const wrapper = document.createElement('div'); wrapper.innerHTML = offerHTML;
            document.getElementById('chat-container').appendChild(wrapper.firstElementChild);
            await runSignatureFlow();
        }

        // SMART FINGER LOGIC
        function moveFingerToTarget(targetId, offsetX = 0, offsetY = 0) {
            const finger = document.getElementById('finger');
            const target = document.getElementById(targetId);
            const screenArea = document.getElementById('phone-screen-area');
            if(!target) return;
            const targetRect = target.getBoundingClientRect();
            const screenRect = screenArea.getBoundingClientRect();
            const relativeTop = (targetRect.top - screenRect.top) + (targetRect.height / 2) + offsetY;
            const relativeLeft = (targetRect.left - screenRect.left) + (targetRect.width / 2) + offsetX;
            finger.style.top = `${relativeTop}px`; finger.style.left = `${relativeLeft}px`; finger.classList.add('active');
        }

        async function runSignatureFlow() {
            const finger = document.getElementById('finger');
            const reviewBtn = document.getElementById('review-btn');
            const modal = document.getElementById('legal-modal');
            const confirmBtn = document.getElementById('confirm-sign-btn');
            
            // 7.5s: Move to sign
            await delay(1500);
            moveFingerToTarget('review-btn', 20, 10);
            await delay(600);
            finger.classList.add('click');
            await delay(200);
            finger.classList.remove('click');
            
            modal.classList.add('active'); // Open Modal
            
            // 9.0s: Sign
            await delay(800);
            moveFingerToTarget('sig-pad-container', 0, 0);
            await delay(500);
            finger.classList.add('click'); simulateDrawing(); await delay(1000); finger.classList.remove('click');

            // 11.0s: Confirm
            await delay(300);
            moveFingerToTarget('confirm-sign-btn', 0, 0);
            await delay(500);
            finger.classList.add('click');
            confirmBtn.innerHTML = "Verifying...";
            confirmBtn.style.background = "#10b981";

            await delay(500);
            finger.classList.remove('click'); finger.classList.remove('active'); modal.classList.remove('active'); 

            reviewBtn.innerHTML = "‚úÖ WAIVER SIGNED";
            reviewBtn.style.background = "#10b981"; reviewBtn.style.color = "white";
            document.getElementById('final-vouchers').classList.add('visible');
            
            // 13.0s: Show Result
            setTimeout(showSummary, 1500);
        }

        function simulateDrawing() {
            const canvas = document.getElementById('sig-canvas');
            const ctx = canvas.getContext('2d');
            ctx.strokeStyle = '#000'; ctx.lineWidth = 2; ctx.beginPath();
            let pts = [[50,20],[70,40],[90,10],[120,50],[150,30],[180,60]];
            let i=0;
            const int = setInterval(() => {
                if(i>=pts.length-1) clearInterval(int);
                else { ctx.moveTo(pts[i][0], pts[i][1]); ctx.lineTo(pts[i+1][0], pts[i+1][1]); ctx.stroke(); i++; }
            }, 100);
        }

        function showSummary() {
            document.getElementById('summary-overlay').classList.add('visible');
            setTimeout(() => {
                document.getElementById('bar-risk').style.height = '100%';
                document.getElementById('bar-actual').style.height = '20%'; 
            }, 500);
        }
    </script>
</body>
</html>
