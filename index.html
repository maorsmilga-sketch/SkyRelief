<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkyRelief | Enterprise Demo</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;700;800&family=Rajdhani:wght@500;600;700&family=Lora:ital@0;1&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-deep: #020617;
            --card-bg: rgba(30, 41, 59, 0.4);
            --card-border: rgba(148, 163, 184, 0.1);
            --primary: #3b82f6; --accent: #8b5cf6; --success: #10b981; --danger: #f43f5e;
            --text-main: #ffffff; --text-sec: #94a3b8;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            background-color: var(--bg-deep);
            color: var(--text-main);
            font-family: 'Outfit', sans-serif;
            height: 100vh; width: 100vw; overflow: hidden;
            display: grid; grid-template-rows: 70px 1fr;
            
            /* FIXED BACKGROUND: Simple overlay method */
            background: linear-gradient(rgba(2, 6, 23, 0.85), rgba(2, 6, 23, 0.7)), url('world-map-bg.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }

        /* --- HEADER & LAYOUT --- */
        header { display: flex; align-items: center; justify-content: space-between; padding: 0 40px; border-bottom: 1px solid var(--card-border); backdrop-filter: blur(10px); z-index: 100; background: rgba(2, 6, 23, 0.6); }
        .logo { font-weight: 800; font-size: 22px; letter-spacing: -0.5px; background: linear-gradient(90deg, #fff, #94a3b8); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .dashboard-grid { display: grid; grid-template-columns: 1fr 400px 1fr; gap: 24px; padding: 30px 40px; height: 100%; }
        .glass-panel { background: var(--card-bg); border: 1px solid var(--card-border); border-radius: 24px; padding: 24px; display: flex; flex-direction: column; backdrop-filter: blur(20px); box-shadow: 0 20px 40px -10px rgba(0,0,0,0.3); }

        /* --- FLIGHT DATA --- */
        .flight-card { display: flex; align-items: center; justify-content: space-between; padding: 12px 16px; margin-bottom: 10px; background: rgba(255,255,255,0.02); border-radius: 12px; transition: all 0.3s; border: 1px solid transparent; }
        .flight-card.cancelled { background: linear-gradient(90deg, rgba(244, 63, 94, 0.15), transparent); border-color: var(--danger); }
        .flight-ident { display: flex; align-items: center; gap: 10px; }
        .airline-logo { width: 24px; height: 24px; border-radius: 4px; background: #fff; padding: 2px; }
        .status-tag { font-size: 11px; font-weight: 700; padding: 4px 10px; border-radius: 6px; background: rgba(16, 185, 129, 0.15); color: var(--success); }
        .cancelled .status-tag { background: var(--danger); color: white; }

        /* --- ROI BOX --- */
        .roi-box { margin-top: auto; padding-top: 20px; border-top: 1px solid var(--card-border); }
        .big-number { font-family: 'Rajdhani', sans-serif; font-size: 64px; font-weight: 700; line-height: 1; margin: 10px 0; background: linear-gradient(to right, #fff, #94a3b8); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .roi-sub { font-size: 14px; color: var(--success); font-weight: 500; }

        /* --- PHONE MOCKUP --- */
        .phone-mockup { width: 100%; height: 100%; background: #000; border-radius: 48px; border: 8px solid #334155; position: relative; overflow: hidden; box-shadow: 0 30px 70px -20px rgba(0,0,0,0.8); }
        .notch { position: absolute; top: 0; left: 50%; transform: translateX(-50%); width: 120px; height: 28px; background: #000; border-bottom-radius: 18px; z-index: 20; }
        .screen-content { background: #f8fafc; height: 100%; width: 100%; padding: 50px 20px 20px; display: flex; flex-direction: column; overflow: hidden; position: relative; }
        
        .phone-header { display: flex; align-items: center; justify-content: center; gap: 8px; margin-bottom: 20px; color:#334155; font-weight:700; }
        .bot-avatar { width: 32px; height: 32px; border-radius: 50%; background: #fff; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }

        .msg { background: #fff; padding: 14px; border-radius: 18px; border-bottom-left-radius: 4px; font-size: 13px; color: #1e293b; margin-bottom: 10px; opacity: 0; transform: translateY(20px); transition: 0.5s; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .msg.visible { opacity: 1; transform: translateY(0); }

        .offer-card-ui { background: linear-gradient(135deg, #4f46e5, #7c3aed); color: white; padding: 20px; border-radius: 20px; text-align: center; margin-top: 10px; opacity: 0; transform: scale(0.9); transition: 0.5s; box-shadow: 0 10px 30px -10px rgba(79, 70, 229, 0.5); }
        .offer-card-ui.visible { opacity: 1; transform: scale(1); }
        .offer-amount { font-family: 'Rajdhani', sans-serif; font-size: 42px; font-weight: 700; margin: 5px 0; }

        /* --- LEGAL MODAL --- */
        .legal-modal { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #fff; z-index: 30; padding: 60px 20px 20px; display: flex; flex-direction: column; transform: translateY(100%); transition: transform 0.5s cubic-bezier(0.16, 1, 0.3, 1); }
        .legal-modal.active { transform: translateY(0); }
        .legal-text { font-family: 'Lora', serif; font-size: 11px; color: #475569; line-height: 1.5; overflow-y: auto; flex-grow: 1; padding: 10px; background: #f1f5f9; border-radius: 8px; border: 1px solid #e2e8f0; }
        .signature-pad { height: 100px; border: 2px dashed #cbd5e1; margin: 15px 0; border-radius: 12px; position: relative; background: #f8fafc; }
        .sig-canvas { width: 100%; height: 100%; }

        /* --- VOUCHERS --- */
        .voucher-container { display: flex; gap: 10px; margin-top: 15px; opacity: 0; transform: translateY(20px); transition: 0.5s 0.5s; }
        .voucher-container.visible { opacity: 1; transform: translateY(0); }
        .voucher { flex: 1; background: #fff; padding: 15px 10px; border-radius: 12px; text-align: center; box-shadow: 0 4px 10px rgba(0,0,0,0.05); display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .real-qr { width: 50px; height: 50px; margin: 8px 0; object-fit: contain; }
        .ride-logo-img { width: 60px; height: auto; margin-bottom: 8px; object-fit: contain; }

        /* Finger Animation */
        .finger-pointer { 
            position: absolute; width: 50px; height: 50px; 
            background: rgba(255, 255, 255, 0.3); border-radius: 50%; border: 2px solid rgba(255,255,255,0.8); 
            pointer-events: none; z-index: 100; opacity: 0; 
            transition: top 0.8s cubic-bezier(0.22, 1, 0.36, 1), left 0.8s cubic-bezier(0.22, 1, 0.36, 1), opacity 0.3s; 
            display: flex; justify-content: center; font-size: 24px; backdrop-filter: blur(5px); 
            /* Start hidden */
            top: 100%; left: 50%;
        }
        .finger-pointer.active { opacity: 1; }
        .finger-pointer.click { transform: scale(0.8); background: rgba(255,255,255,0.6); transition: transform 0.1s; }

        /* MARKET STYLES */
        .bid-item { display: flex; align-items: center; padding: 12px; background: rgba(255,255,255,0.03); border-radius: 16px; margin-bottom: 10px; transition: 0.3s; gap: 15px; border: 1px solid transparent; }
        .bid-item.winner { background: rgba(16, 185, 129, 0.1); border-color: var(--success); transform: scale(1.02); box-shadow: 0 10px 30px -10px rgba(16, 185, 129, 0.3); }
        .bid-item.disabled { opacity: 0.3; filter: grayscale(1); }
        .hotel-thumb { width: 60px; height: 60px; border-radius: 10px; object-fit: cover; border: 1px solid rgba(255,255,255,0.1); }
        .bid-info { flex-grow: 1; }
        .bid-val { font-family: 'Rajdhani', sans-serif; font-size: 22px; font-weight: 700; white-space: nowrap; }
    </style>
</head>
<body>

    <header>
        <div class="logo"><span style="color:var(--primary)">‚óÜ</span> SKYRELIEF <span style="font-weight:300; opacity:0.5; font-size: 14px;">GLOBAL OPS</span></div>
    </header>

    <div class="dashboard-grid">
        <div class="glass-panel">
            <div class="panel-title" style="color:var(--text-sec); font-size:12px; margin-bottom:15px; letter-spacing: 1px;">LIVE FLIGHT TRACKING</div>
            
            <div class="flight-card">
                <div class="flight-ident">
                    <img src="logo-ba.png" class="airline-logo" alt="BA">
                    <div style="font-weight:600">BA-104</div>
                </div>
                <div class="status-tag">ON TIME</div>
            </div>
            
            <div class="flight-card" id="target-flight">
                <div class="flight-ident">
                    <img src="logo-ly.png" class="airline-logo" alt="LY">
                    <div style="font-weight:600">LY-315</div>
                </div>
                <div class="status-tag" id="target-tag">ON TIME</div>
            </div>

            <div class="flight-card">
                <div class="flight-ident">
                    <img src="logo-ua.png" class="airline-logo" alt="UA">
                    <div style="font-weight:600">UA-095</div>
                </div>
                <div class="status-tag">ON TIME</div>
            </div>

            <div class="roi-box">
                <div style="font-size:12px; color:var(--text-sec); letter-spacing: 1px;">CAPITAL PRESERVED (YTD)</div>
                <div class="big-number" id="money-display">$0</div>
                <div class="roi-sub" id="roi-sub">Awaiting critical event...</div>
            </div>
        </div>

        <div style="padding: 10px;">
            <div class="phone-mockup">
                <div class="notch"></div>
                <div class="screen-content" id="phone-screen-area">
                    <div class="phone-header">
                        <img src="bot-avatar.png" class="bot-avatar" alt="Bot">
                        <span>Travel Assistant</span>
                    </div>
                    
                    <div id="chat-container" style="flex-grow: 1;"></div>
                    
                    <div class="voucher-container" id="final-vouchers">
                        <div class="voucher">
                            <div style="font-size:10px; font-weight:700; color:#334155;">HOTEL CHECK-IN</div>
                            <img src="qr-code.png" class="real-qr" alt="QR Code">
                        </div>
                        <div class="voucher" style="background:#1e293b; color:white;">
                            <img src="uber-logo.png" class="ride-logo-img" alt="Ride Logo">
                            <div style="font-size:14px; font-weight:600;">Ride Ready</div>
                            <div style="font-size:10px; opacity:0.7;">To Hotel</div>
                        </div>
                    </div>

                    <div class="finger-pointer" id="finger">üëÜ</div>

                    <div class="legal-modal" id="legal-modal">
                        <div style="text-align:center; font-weight:700; color:#1e293b; margin-bottom:15px;">EU261 Settlement Agreement</div>
                        <div class="legal-text">
                            <strong>WAIVER AND RELEASE OF LIABILITY</strong><br><br>
                            By signing below, the passenger accepts the offered travel credit ($600 USD value) as full and final settlement for flight disruption LY-315. 
                            Passenger hereby irrevocably waives any further right to claim cash compensation under EU Regulation 261/2004 or any other applicable law against the airline. 
                            This agreement is binding and final. The travel credit is non-transferable and valid for 24 months.
                        </div>
                        <div class="signature-pad" id="sig-pad-container">
                            <div style="position:absolute; top:5px; left:10px; font-size:10px; color:#94a3b8;">SIGN HERE:</div>
                            <canvas id="sig-canvas" class="sig-canvas"></canvas>
                        </div>
                        <button id="confirm-sign-btn" style="background:#1e293b; color:white; border:none; padding:14px; width:100%; border-radius:12px; font-weight:700;">Confirm Signature</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="glass-panel">
            <div class="panel-title" style="color:var(--text-sec); font-size:12px; margin-bottom:15px; letter-spacing: 1px;">HOTEL SOURCING (Req: 450 Pax)</div>
            <div id="market-list" style="opacity:0.5;">
                
                <div class="bid-item" id="bid-1">
                    <img src="hotel-airport.jpg" class="hotel-thumb" alt="Hotel 1">
                    <div class="bid-info"><div style="font-weight:600">Grand Airport</div><div style="font-size:11px; color:var(--danger);">‚ö† 150 Rooms</div></div>
                    <div class="bid-val" id="p1">‚Ç¨250</div>
                </div>
                
                <div class="bid-item" id="bid-2">
                    <img src="hotel-city.jpg" class="hotel-thumb" alt="Hotel 2">
                    <div class="bid-info"><div style="font-weight:600">Metro Hub</div><div style="font-size:11px; color:var(--success);">‚úî 500 Rooms</div></div>
                    <div class="bid-val" id="p2">‚Ç¨250</div>
                </div>

                <div class="bid-item" id="bid-3">
                    <img src="hotel-boutique.jpg" class="hotel-thumb" alt="Hotel 3">
                    <div class="bid-info"><div style="font-weight:600">Regal Suites</div><div style="font-size:11px; color:var(--danger);">‚ö† 80 Rooms</div></div>
                    <div class="bid-val" id="p3">‚Ç¨250</div>
                </div>

            </div>
        </div>
    </div>

    <script>
        const delay = ms => new Promise(res => setTimeout(res, ms));
        window.onload = () => { setTimeout(initScenario, 2000); };

        async function initScenario() {
            // 1. Flight Cancelled Trigger
            document.getElementById('target-flight').classList.add('cancelled');
            document.getElementById('target-tag').innerText = "CANCELLED";
            
            // 2. Run Hotel Auction
            document.getElementById('market-list').style.opacity = "1";
            await runAuction();
            
            // 3. Chat Flow
            sendMsg("‚ö†Ô∏è <strong>Flight Alert:</strong> Flight LY-315 cancelled. 450 pax affected.");
            await delay(1500);
            sendMsg("‚úÖ <strong>Solution Found:</strong> Metro Hub Hotel (Capacity guaranteed).");
            await delay(1000);
            showInitialOffer();
        }

        async function runAuction() {
            let p1=250, p2=250, p3=250;
            for(let i=0; i<10; i++) {
                p1 -= Math.floor(Math.random()*4); p2 -= Math.floor(Math.random()*7); p3 -= Math.floor(Math.random()*3);
                document.getElementById('p1').innerText = `‚Ç¨${p1}`; document.getElementById('p2').innerText = `‚Ç¨${p2}`; document.getElementById('p3').innerText = `‚Ç¨${p3}`;
                await delay(150);
            }
            document.getElementById('bid-1').classList.add('disabled'); document.getElementById('bid-3').classList.add('disabled');
            document.getElementById('bid-2').classList.add('winner');
        }

        function sendMsg(html) {
            const div = document.createElement('div'); div.className = 'msg'; div.innerHTML = html;
            document.getElementById('chat-container').appendChild(div);
            setTimeout(() => div.classList.add('visible'), 50);
        }

        async function showInitialOffer() {
            const offerHTML = `
            <div class="offer-card-ui visible">
                <div style="font-size:11px; text-transform:uppercase; opacity:0.9;">Instant Compensation</div>
                <div class="offer-amount">$600</div>
                <div style="font-size:12px; margin-bottom:15px;">Travel credit instead of cash claim.</div>
                <button id="review-btn" style="background:white; color:#4f46e5; border:none; padding:12px; width:100%; border-radius:12px; font-weight:700; font-family:'Outfit';">Tap to Review</button>
            </div>`;
            const wrapper = document.createElement('div'); wrapper.innerHTML = offerHTML;
            document.getElementById('chat-container').appendChild(wrapper.firstElementChild);

            // START FINGER SEQUENCE
            await runSignatureFlow();
        }

        // --- NEW SMART FINGER LOGIC ---
        // This function finds exactly where the button is on YOUR screen
        function moveFingerToTarget(targetId, offsetX = 0, offsetY = 0) {
            const finger = document.getElementById('finger');
            const target = document.getElementById(targetId);
            const screenArea = document.getElementById('phone-screen-area');

            if(!target) return;

            // Get positions relative to viewport
            const targetRect = target.getBoundingClientRect();
            const screenRect = screenArea.getBoundingClientRect();

            // Calculate position relative to the phone screen container
            // We center the finger on the target element
            const relativeTop = (targetRect.top - screenRect.top) + (targetRect.height / 2) + offsetY;
            const relativeLeft = (targetRect.left - screenRect.left) + (targetRect.width / 2) + offsetX;

            finger.style.top = `${relativeTop}px`;
            finger.style.left = `${relativeLeft}px`;
            finger.classList.add('active');
        }

        async function runSignatureFlow() {
            const finger = document.getElementById('finger');
            const reviewBtn = document.getElementById('review-btn');
            const modal = document.getElementById('legal-modal');
            const confirmBtn = document.getElementById('confirm-sign-btn');
            
            // STEP 1: Move to Review Button (Smart Calculation)
            await delay(1000);
            moveFingerToTarget('review-btn', 20, 10); // +Offset to look natural
            
            await delay(800);
            finger.classList.add('click');
            reviewBtn.innerHTML = "Opening Agreement...";
            await delay(500);
            finger.classList.remove('click');
            
            // STEP 2: Open Modal & Sign
            modal.classList.add('active');
            await delay(1000);
            
            // Move to signature pad area
            moveFingerToTarget('sig-pad-container', 0, 0);
            
            await delay(800);
            finger.classList.add('click'); // Press down to start signing
            simulateDrawing(); // Scribble animation on canvas
            await delay(1500); // Signing takes time
            finger.classList.remove('click');

            // STEP 3: Click Confirm inside modal
            await delay(500);
            moveFingerToTarget('confirm-sign-btn', 0, 0);
            
            await delay(800);
            finger.classList.add('click');
            confirmBtn.innerHTML = "Verifying...";
            confirmBtn.style.background = "#10b981";

            await delay(800);
            finger.classList.remove('click');
            finger.classList.remove('active'); // Hide finger
            modal.classList.remove('active'); // Close modal

            // STEP 4: Show Final State & Vouchers
            reviewBtn.innerHTML = "‚úÖ Agreement Signed";
            reviewBtn.style.background = "#10b981"; reviewBtn.style.color = "white";
            document.getElementById('final-vouchers').classList.add('visible');
            
            animateMoney();
        }

        function simulateDrawing() {
            const canvas = document.getElementById('sig-canvas');
            const ctx = canvas.getContext('2d');
            ctx.strokeStyle = '#000'; ctx.lineWidth = 3; ctx.beginPath();
            let pts = [[50,20],[70,40],[90,10],[120,50],[150,30],[180,60]];
            let i=0;
            const int = setInterval(() => {
                if(i>=pts.length-1) clearInterval(int);
                else { ctx.moveTo(pts[i][0], pts[i][1]); ctx.lineTo(pts[i+1][0], pts[i+1][1]); ctx.stroke(); i++; }
            }, 150);
        }

        function animateMoney() {
            const display = document.getElementById('money-display');
            document.getElementById('roi-sub').innerText = "100% Cash Risk Diverted";
            let val = 0; const target = 216500;
            const interval = setInterval(() => {
                val += target/50;
                if(val >= target) { val = target; clearInterval(interval); }
                display.innerText = "$" + Math.floor(val).toLocaleString();
            }, 30);
        }
    </script>
</body>
</html>
