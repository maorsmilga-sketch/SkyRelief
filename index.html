<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkyRelief - Triple Threat Demo</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root { --airline: #0f172a; --hotel: #0d9488; --passenger: #6366f1; --bg: #f1f5f9; }
        * { box-sizing: border-box; font-family: 'Inter', sans-serif; }
        body { margin: 0; background: var(--bg); display: flex; height: 100vh; padding: 10px; gap: 10px; overflow: hidden; }

        /* Generic Panel Style */
        .panel { background: white; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); overflow: hidden; display: flex; flex-direction: column; position: relative; }
        .panel-header { padding: 15px; color: white; font-weight: 800; text-transform: uppercase; font-size: 12px; letter-spacing: 1px; }

        /* 1. AIRLINE COMMAND (Top Left) */
        .airline-view { flex: 1.5; display: flex; flex-direction: column; gap: 10px; }
        .command-center { flex: 2; background: var(--airline); color: white; }
        .roi-dashboard { flex: 1; background: white; border: 2px solid var(--airline); padding: 20px; }

        /* 2. HOTEL TABLET (Right Side) */
        .hotel-view { flex: 1.2; border: 15px solid #1a1a1a; border-radius: 40px; background: white; }
        
        /* 3. PASSENGER MOBILE (Bottom Left) */
        .passenger-view { width: 320px; border: 12px solid #000; border-radius: 45px; background: #fff; position: relative; }

        /* UI Elements */
        .btn { padding: 12px; border: none; border-radius: 10px; cursor: pointer; font-weight: 700; transition: 0.3s; width: 100%; }
        .btn-trigger { background: #ef4444; color: white; }
        .btn-bid { background: var(--hotel); color: white; }
        .notif { position: absolute; top: -100px; left: 10px; right: 10px; background: white; padding: 15px; border-radius: 15px; box-shadow: 0 10px 20px rgba(0,0,0,0.1); border-left: 5px solid var(--passenger); transition: 0.5s; z-index: 100; font-size: 12px; }
        .notif.show { top: 40px; }

        .console { font-family: monospace; font-size: 11px; color: #38bdf8; background: #000; padding: 10px; height: 100px; overflow-y: auto; border-radius: 10px; margin-top: 10px; }
        
        /* ROI Table */
        table { width: 100%; border-collapse: collapse; font-size: 13px; margin-top: 10px; }
        td { padding: 8px 0; border-bottom: 1px solid #eee; }
        .profit { color: #10b981; font-weight: 800; }
    </style>
</head>
<body>

    <div class="airline-view">
        <div class="panel command-center">
            <div class="panel-header" style="background: #1e293b;">Airline Ops Control</div>
            <div style="padding: 20px;">
                <h3 style="margin: 0 0 10px 0;">Flight LY315 | LHR ‚úàÔ∏è TLV</h3>
                <p style="font-size: 12px; color: #94a3b8;">Status: On Time (Awaiting IROPS Event)</p>
                <button class="btn btn-trigger" onclick="triggerDelay()">TRIGGER 4H DELAY (IROPS)</button>
                <div class="console" id="air-log">> System Monitoring Active...</div>
            </div>
        </div>

        <div class="panel roi-dashboard">
            <div style="font-size: 11px; font-weight: 800; color: var(--airline);">ESTIMATED REVENUE RETENTION</div>
            <div id="roi-content" style="opacity: 0.3;">
                <table>
                    <tr><td>Market Hotel Rate (Avg)</td><td align="right">‚Ç¨220.00</td></tr>
                    <tr><td>SkyRelief Winning Bid</td><td align="right" class="profit" id="final-bid-val">‚Ç¨--</td></tr>
                    <tr><td>Legal Shield (Cash vs Credit)</td><td align="right" class="profit">+$260.00</td></tr>
                    <tr style="border:none;"><td style="font-weight:800;">TOTAL SAVED PER PAX</td><td align="right" class="profit" style="font-size:18px;" id="total-saved">$0.00</td></tr>
                </table>
            </div>
        </div>
    </div>

    <div class="panel passenger-view">
        <div class="panel-header" style="background: var(--passenger); text-align: center;">Passenger Mobile</div>
        <div id="sms" class="notif">
            <strong>SkyRelief:</strong> Flight LY315 delayed. We've secured your hotel & compensation. <br><br>
            <button class="btn" style="background:var(--passenger); color:white; font-size:10px;" onclick="openPassengerApp()">VIEW OPTIONS</button>
        </div>
        <div id="p-app" style="display:none; padding: 20px; text-align: center;">
            <h4 style="margin-bottom:5px;">Recovery Voucher</h4>
            <div style="background:#f8fafc; padding:15px; border-radius:15px; font-size:11px; text-align:left; margin-bottom:15px;">
                üè® <strong>Hotel:</strong> Confirmed<br>
                ‚öñÔ∏è <strong>Compensation:</strong> $600 Travel Credit<br>
                <small>*By accepting, you waive legal cash claims.</small>
            </div>
            <button class="btn" style="background:var(--hotel); color:white;" onclick="finishDemo()">ACCEPT & SIGN</button>
        </div>
    </div>

    <div class="panel hotel-view">
        <div class="panel-header" style="background: var(--hotel); text-align: center;">Hotel Bidding Terminal (Lobby)</div>
        <div id="hotel-idle" style="padding: 60px 20px; text-align: center;">
            <div style="font-size: 30px; font-weight: 800; color: #0a2e5c;">ROYAL HOTEL</div>
            <p style="font-size: 12px; color: #666;">Waiting for network requests...</p>
        </div>
        <div id="hotel-active" style="display:none; padding: 20px;">
            <div style="background: #fee2e2; border: 1px solid #ef4444; padding: 10px; border-radius: 10px; font-size: 12px; margin-bottom: 20px;">
                üö® <strong>IROPS Alert:</strong> 40 Rooms Needed for LY315
            </div>
            <div style="text-align: center;">
                <div style="font-size: 10px; color: #666;">CURRENT LOWEST BID</div>
                <div style="font-size: 40px; font-weight: 800; color: #ef4444;" id="market-bid">‚Ç¨220</div>
                <input type="number" id="my-bid" placeholder="Enter Your Bid" style="width:100%; padding:15px; margin:15px 0; border:2px solid var(--hotel); border-radius:10px; text-align:center; font-size:18px;">
                <button class="btn btn-bid" onclick="submitBid()">SUBMIT WINNING BID</button>
            </div>
        </div>
    </div>

    <audio id="ding" src="https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3"></audio>

    <script>
        let currentMarket = 220;
        let auctionInterval;

        function log(msg) {
            const l = document.getElementById('air-log');
            l.innerHTML += `<br>> ${msg}`;
            l.scrollTop = l.scrollHeight;
        }

        function triggerDelay() {
            log("IROPS DETECTED: Flight LY315 delayed 4h.");
            document.getElementById('ding').play();
            
            // Passenger gets SMS
            setTimeout(() => {
                document.getElementById('sms').classList.add('show');
                log("SMS Alerts dispatched to 142 passengers.");
            }, 1000);

            // Hotel gets Alert
            setTimeout(() => {
                document.getElementById('hotel-idle').style.display = 'none';
                document.getElementById('hotel-active').style.display = 'block';
                log("Reverse Auction started for 40 room blocks.");
                startAuction();
            }, 2000);
        }

        function startAuction() {
            auctionInterval = setInterval(() => {
                currentMarket -= (Math.floor(Math.random() * 5) + 2);
                document.getElementById('market-bid').innerText = `‚Ç¨${currentMarket}`;
                log(`Competitor bid: ‚Ç¨${currentMarket}`);
            }, 3000);
        }

        function submitBid() {
            let myBid = document.getElementById('my-bid').value;
            if(!myBid || myBid >= currentMarket) {
                alert("You must beat the current market bid!");
                return;
            }
            clearInterval(auctionInterval);
            document.getElementById('final-bid-val').innerText = `‚Ç¨${myBid}`;
            log(`AUCTION CLOSED. Winner: Royal Hotel @ ‚Ç¨${myBid}`);
            document.getElementById('hotel-active').innerHTML = `<h3 style="color:var(--hotel); text-align:center;">WINNER! üéâ<br>Blocks Secured.</h3>`;
        }

        function openPassengerApp() {
            document.getElementById('sms').classList.remove('show');
            document.getElementById('p-app').style.display = 'block';
            log("Passenger opened SkyRelief App.");
        }

        function finishDemo() {
            document.getElementById('p-app').innerHTML = `<h3 style="color:var(--passenger);">Thank you!</h3><p style="font-size:12px;">Voucher sent to email.</p>`;
            document.getElementById('roi-content').style.opacity = "1";
            
            let bid = parseInt(document.getElementById('final-bid-val').innerText.replace('‚Ç¨',''));
            let saved = (220 - bid) + 260; // Simplified calculation
            document.getElementById('total-saved').innerText = `$${saved.toFixed(2)}`;
            
            log("PASSENGER SETTLED. Final ROI Calculated.");
        }
    </script>
</body>
</html>
