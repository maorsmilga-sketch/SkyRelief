<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkyRelief - Legal Settlement Flow</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root { --airline: #0f172a; --hotel: #0d9488; --passenger: #6366f1; --bg: #f1f5f9; }
        * { box-sizing: border-box; font-family: 'Inter', sans-serif; }
        body { margin: 0; background: var(--bg); display: flex; height: 100vh; padding: 10px; gap: 10px; overflow: hidden; }
        .panel { background: white; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); overflow: hidden; display: flex; flex-direction: column; }
        .panel-header { padding: 12px; color: white; font-weight: 800; text-transform: uppercase; font-size: 11px; text-align: center; }
        
        .airline-view { flex: 1.4; display: flex; flex-direction: column; gap: 10px; }
        .hotel-view { flex: 1.2; border: 12px solid #1a1a1a; border-radius: 40px; }
        .passenger-view { width: 340px; border: 12px solid #000; border-radius: 45px; background: #fff; overflow: hidden; position: relative; }

        /* Passenger Screens */
        .p-screen { padding: 20px; display: none; height: 100%; overflow-y: auto; }
        .p-screen.active { display: block; }
        .msg-bubble { background: #f1f5f9; padding: 15px; border-radius: 15px; font-size: 13px; margin-bottom: 15px; border-bottom-left-radius: 2px; }
        
        .btn { padding: 12px; border: none; border-radius: 10px; cursor: pointer; font-weight: 700; width: 100%; margin-top: 10px; transition: 0.2s; }
        .btn:active { transform: scale(0.98); }
        
        /* Signing Document */
        .legal-doc { background: #fff; border: 1px solid #ddd; padding: 15px; font-size: 10px; color: #666; height: 150px; overflow-y: scroll; margin-bottom: 10px; }
        .signature-box { border: 2px dashed #cbd5e1; height: 80px; display: flex; align-items: center; justify-content: center; color: #94a3b8; font-style: italic; font-size: 12px; }

        .profit { color: #10b981; font-weight: 800; }
        .hidden { display: none; }
    </style>
</head>
<body>

    <div class="airline-view">
        <div class="panel" style="background: var(--airline); color: white; flex: 1.2;">
            <div class="panel-header" style="background: rgba(0,0,0,0.2);">Airline Ops</div>
            <div style="padding: 15px;">
                <button class="btn" style="background:#ef4444; color:white;" onclick="startSim()">TRIGGER IROPS (LY315)</button>
                <div id="air-log" style="font-family:monospace; font-size:10px; color:#38bdf8; margin-top:10px; height:60px; overflow:auto;">> Ready...</div>
            </div>
        </div>
        <div class="panel" style="flex: 1.8; padding: 15px;">
            <div style="font-size: 11px; font-weight: 800;">REAL-TIME ROI DASHBOARD</div>
            <table style="width:100%; font-size:12px; margin-top:10px;">
                <tr><td>Potential Cash Claims</td><td align="right" style="color:#ef4444;">-$85,200</td></tr>
                <tr><td>SkyRelief Settlement (Credit)</td><td align="right" class="profit" id="roi-credit">+$0.00</td></tr>
                <tr><td>Hotel Bid Savings</td><td align="right" class="profit" id="roi-hotel">+$0.00</td></tr>
                <tr style="border-top:2px solid var(--airline);"><td style="font-weight:800;">NET CAPITAL RETAINED</td><td align="right" class="profit" style="font-size:18px;" id="roi-total">$0.00</td></tr>
            </table>
        </div>
    </div>

    <div class="panel passenger-view">
        <div class="panel-header" style="background: var(--passenger);">SkyRelief Assistant</div>
        
        <div id="step-hotel" class="p-screen active">
            <div class="msg-bubble"><strong>Message 1/2:</strong> We've secured a room for you at:</div>
            <div id="p-hotel-card" style="background:var(--hotel); color:white; padding:15px; border-radius:15px; text-align:center;">
                <small>Confirmed Stay</small>
                <div id="assigned-hotel" style="font-size:18px; font-weight:800;">Searching...</div>
                <div style="font-size:10px; margin-top:5px;">Check-in: Tonight | Shuttle: Every 15m</div>
            </div>
            <button id="next-to-settle" class="btn hidden" style="background:var(--passenger); color:white;" onclick="goToSettlement()">View Compensation Offer ➔</button>
        </div>

        <div id="step-offer" class="p-screen">
            <div class="msg-bubble"><strong>Message 2/2:</strong> We value your time. Instead of waiting months for a legal claim, would you like a <strong>$600 Flight Credit</strong> instantly?</div>
            <div style="background:#f0fdf4; border:1px solid #10b981; padding:15px; border-radius:15px; text-align:center;">
                <div style="font-size:24px; font-weight:800; color:#10b981;">$600.00</div>
                <div style="font-size:10px; color:#166534;">Valid for any flight in the next 24 months</div>
            </div>
            <button class="btn" style="background:#10b981; color:white;" onclick="goToSigning()">YES - ACCEPT CREDIT</button>
            <button class="btn" style="background:transparent; color:#64748b; font-size:11px;">No, I prefer to file a manual claim</button>
        </div>

        <div id="step-sign" class="p-screen">
            <h4 style="margin:0 0 10px 0;">Legal Agreement</h4>
            <div class="legal-doc">
                I, the passenger, hereby accept the travel credit of $600 as full and final settlement for the disruption of flight LY315. By signing, I waive all rights to further financial claims under EC 261/2004 or local regulations...
            </div>
            <div class="signature-box">Sign here with your finger</div>
            <button class="btn" style="background:var(--airline); color:white;" onclick="completeJourney()">SIGN & FINALIZE</button>
        </div>

        <div id="step-done" class="p-screen" style="text-align:center; padding-top:60px;">
            <div style="font-size:50px;">✅</div>
            <h3>All Set!</h3>
            <p style="font-size:12px; color:#666;">Hotel voucher and $600 credit sent to your email.</p>
        </div>
    </div>

    <div class="panel hotel-view">
        <div class="panel-header" style="background: var(--hotel);">Lobby Terminal</div>
        <div id="h-active" style="padding:20px; display:none;">
            <div style="color:#ef4444; font-size:11px; font-weight:800;">LIVE AUCTION</div>
            <div id="h-price" style="font-size:40px; font-weight:800;">€220</div>
            <input type="text" id="h-name" value="Hilton Airport" style="width:100%; padding:10px; margin-top:10px; border-radius:8px; border:1px solid #ddd;">
            <button class="btn" style="background:var(--hotel); color:white;" onclick="hotelWin()">SUBMIT WINNING BID</button>
        </div>
        <div id="h-idle" style="padding:60px 20px; text-align:center; color:#94a3b8;">Waiting...</div>
    </div>

    <script>
        let log = (m) => document.getElementById('air-log').innerHTML += `<br>> ${m}`;
        let auction;

        function startSim() {
            log("IROPS: Flight LY315 Delayed.");
            document.getElementById('h-idle').style.display = 'none';
            document.getElementById('h-active').style.display = 'block';
            auction = setInterval(() => {
                let p = parseInt(document.getElementById('h-price').innerText.replace('€',''));
                document.getElementById('h-price').innerText = `€${p - 5}`;
            }, 2000);
        }

        function hotelWin() {
            clearInterval(auction);
            const name = document.getElementById('h-name').value;
            const price = document.getElementById('h-price').innerText;
            log(`Winner: ${name} @ ${price}`);
            document.getElementById('assigned-hotel').innerText = name;
            document.getElementById('next-to-settle').classList.remove('hidden');
            document.getElementById('roi-hotel').innerText = `+$8,400`; // Savings example
        }

        function goToSettlement() {
            document.querySelector('.active').classList.remove('active');
            document.getElementById('step-offer').classList.add('active');
            log("Passenger viewing Settlement Offer.");
        }

        function goToSigning() {
            document.querySelector('.active').classList.remove('active');
            document.getElementById('step-sign').classList.add('active');
        }

        function completeJourney() {
            document.querySelector('.active').classList.remove('active');
            document.getElementById('step-done').classList.add('active');
            log("SETTLEMENT SIGNED. Payout converted to credit.");
            document.getElementById('roi-credit').innerText = `+$36,920`; // Payout vs Credit ROI
            document.getElementById('roi-total').innerText = `$45,320`;
        }
    </script>
</body>
</html>
